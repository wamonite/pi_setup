---
- name: OctoPrint settings
  set_fact: setup_octoprint={{ octoprint is defined and octoprint }}

- name: Install OctoPrint
  pip: name='git+https://github.com/foosel/OctoPrint.git@1.2.15#egg=octoprint' editable=false virtualenv=/home/pi/.virtualenvs/octoprint
  when: setup_octoprint

- name: Enable serial access
  user: name=pi groups=dialout append=yes
  become: true
